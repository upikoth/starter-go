openapi: 3.0.2
info:
  version: 1.0.0
  title: Starter schema
paths:
  /api/v1/health:
    get:
      tags:
        - health
      description: Получить информацию о работоспособности приложения
      operationId: V1CheckHealth
      responses:
        200:
          description: Успешный ответ
          $ref: '#/components/responses/SuccessResponse'
        default:
          description: Ошибка
          $ref: "#/components/responses/ErrorResponse"

  /api/v1/registrations:
    post:
      tags:
        - registration
      description: Создать заявку на регистрацию пользователя
      operationId: V1CreateRegistration
      requestBody:
        $ref: '#/components/requestBodies/V1RegistrationsCreateRegistrationRequestBody'
      responses:
        200:
          description: Успешный ответ
          $ref: '#/components/responses/V1RegistrationsCreateRegistrationResponse'
        default:
          description: Ошибка
          $ref: "#/components/responses/ErrorResponse"

components:
  schemas:
    SuccessResponse:
      type: object
      required:
        - success
        - data
      properties: 
        success:
          type: boolean
          enum:
            - true
        data:
          type: object

    ErrorResponse:
      type: object
      required:
        - success
        - data
        - error
      properties: 
        success:
          type: boolean
          enum:
            - false
        data:
          type: object
        error:
          type: object
          required:
            - code
            - description
          properties:
            code:
              type: string
            description:
              type: string

    V1RegistrationsCreateRegistrationRequestBody:
      type: object
      required:
        - email
      properties:
        email:
          type: string
          format: email

    V1RegistrationsCreateRegistrationResponse:
      type: object
      required:
        - success
        - data
      properties: 
        success:
          type: boolean
          enum:
            - true
        data:
          type: object
          required:
            - id
            - email
          properties: 
            id:
              type: string
            email:
              type: string
              format: email

  requestBodies:
    V1RegistrationsCreateRegistrationRequestBody:
      description: Запрос для создания заявки на регистрацию
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/V1RegistrationsCreateRegistrationRequestBody'

  responses:
    SuccessResponse:
      description: Ответ при успешно выполненном запросе
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/SuccessResponse'

    ErrorResponse:
      description: Ответ при ошибке во время выполнения запроса
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'

    V1RegistrationsCreateRegistrationResponse:
      description: Ответ при успешном создании заявки на регистрацию
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/V1RegistrationsCreateRegistrationResponse'
